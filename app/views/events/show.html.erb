<div class="container">
  <div class="row mt-3">
    <div class='col-sm-12 col-lg-7'>
      <% if @event.photo.present? %>
        <div class="banner" style="background-image: linear-gradient(rgba(0,0,0,0), rgba(0,0,0,0)), url('<%= cl_image_path @event.photo.key, height: 300, crop: :fill %>')">
        </div>
      <% end %>

      <div class="d-flex my-3 justify-content-between">

        <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#sellTicketModal">
          Sell
        </button>
        <%= link_to 'Comprar', new_event_order_path(@event), class: 'btn btn-primary rounded ms-1', style: "width:100%" %>
      </div>

      <div class='d-flex mb-3 justify-content-between mt-3'>
        <div>
          <div class='d-flex align-items-baseline'>
            <p class='h4 fw-semibold'><%= @event.title %></p>
          </div>
        </div>
        <div>
          <p class='mb-3'><strong><%= @event.date %></strong></p>
        </div>
      </div>

        <p class='h6 fw-semibold'>Location: <%= @event.location %></p>
        <p class='fw-semibold'>Host: <%= @event.user.name %></p>
        <p>Description: <%= @event.description %></p>

        <%= link_to 'Back to events', events_path, class: 'btn btn-sm btn-outline-primary rounded mb-4' %>
    </div>

    <div class='col-sm-12 col-lg-5'>
      <div style="width: 100%; height: 700px;"
        data-controller="map"
        data-map-markers-value="<%= @marker.to_json %>"
        data-map-api-key-value="<%= ENV['MAPBOX_API_KEY'] %>">
      </div>
    </div>
  </div>

  <div class="modal fade" id="sellTicketModal" tabindex="-1" role="dialog" aria-labelledby="sellTicketModalLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="sellTicketModalLabel">Sell Ticket</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <%= render 'tickets/form', ticket: @ticket, event: @event %>
      </div>
    </div>
  </div>
</div>
</div>
